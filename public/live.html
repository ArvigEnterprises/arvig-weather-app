<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Fjalla+One|Heebo|Mukta+Mahee" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0/jquery-ui.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js" integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyCSZSw2TAWB6ObN_Wtjq3krzdNxkT2Ir-g",
            authDomain: "arvigweatherapp.firebaseapp.com",
            databaseURL: "https://arvigweatherapp.firebaseio.com",
            projectId: "arvigweatherapp",
            storageBucket: "arvigweatherapp.appspot.com",
            messagingSenderId: "482632098039"
        };
        firebase.initializeApp(config);

    </script>
    <script src="js/bootstrap.js"></script>
    <script src="js/weather.js"></script>
    <script src="js/ad.js"></script>
    <script src="js/eventData.js"></script>
    <link rel="stylesheet" type="text/css" href="css/app.css">

</head>
<body style="background-color: #404040; overflow:hidden;">
<!--<div class="d-none">-->
    <!--<input type="hidden" id="lonInput" name="lon"/>-->
    <!--<input type="hidden" id="latInput" name="lat"/>-->
    <!--<input class="" id="searchValue" type="text" name="search"/>-->
    <!--<i id="searchButton" class="fas fa-search"></i>-->
    <!--&lt;!&ndash;<h1><i class="fas fa-search"></i> Sebeka, MN</h1>&ndash;&gt;-->
<!--</div>-->
<span id="timer" style="position: fixed; color: #fff; font-size: 130px; background-color: black"></span>
<span id="slideNumber" style="
    display: none;
    position: fixed;
    color: #fff;
    font-size: 130px;
    position: fixed;
    top: 44%;
    left: 44%;
    z-index: 100000;
    background-color: #00000052;
    padding: 0px 60px;">1</span>
<div id="innerData" class="d-none">
    <img class="float-right" src="img/R8_18160_Arvig_logo_RGB_Reversed.png" width="200" style="margin: 20px; width: 14%;"/>
    <div id="currentCity" class="text-view-4 text-white" style="padding: 10px 10px 10px 4%; position: fixed;"></div>
    <!--<span class="" style="margin: 20px; position: fixed">Perham, MN</span>-->
    <div class="col-4 center headerTabs">
        <div class="row">
            <div class="col-12">
                <nav>
                    <div class="nav nav-tabs clearData text-view-2 col-12" id="nav-tab-test" role="tablist">
                        <div class="nav-item nav-link seven-cols pr-0 pl-0 col-5 active text-right" id="nav-tab-test-1" data-toggle="tab" href="#nav-test-1" role="tab" aria-controls="nav-test-1" aria-selected="true">
                            Forecast
                        </div>
                        <span class="col-2 text-center" style="font-size: 3.5vw" >|</span>
                        <div class="nav-item nav-link seven-cols pr-0 pl-0 col-5 text-left" id="nav-tab-test-2" data-toggle="tab" href="#nav-test-2" role="tab" aria-controls="nav-test-2" aria-selected="true">
                            Radar
                        </div>
                    </div>

                </nav>
            </div>
        </div>
    </div>
    <div class="tab-content clearData" id="nav-tab-testContent" style="padding-top: 2%;">
        <div class="tab-pane fade show active forecastTabContent" id="nav-test-1" role="tabpanel" aria-labelledby="nav-test-1-tab">
            <div class="col-12 bg-transparent text-white">
                <div class="row col-12">
                    <div class="col-4">
                        <!--<div class="row">-->
                            <!--<span class="text-view-4" style="padding-left: 10%;">Perham, MN</span>-->
                        <!--</div>-->
                        <div class="col-12" style="padding-left: 10%;">
                            <h1><span id="currentTemp" class="text-view-9" style="color: #fff;">37</span><span class="text-view-9" style="color: #fff;">&#176;</span>
                            <span id="currentIcon"><i class="fas fa-cloud-sun text-view-9"></i></span>
                            </h1>
                        </div>
                        <!--<div class="col-6" id="currentIcon">-->
                            <!--<i class="fas fa-cloud-sun text-view-9"></i>-->
                        <!--</div>-->
                    </div>
                    <div class="col-8" style="padding-top: 3%;">
                            <div class="row">
                                <div class="col-4">
                                    <div class="row">
                                        <div class="col-6 Fjalla text-view-2"><i class="fas fa-thermometer-full"></i> H <span id="currentHigh">40</span>&#176;</div>
                                        <div class="col-6 Fjalla text-view-2"><i class="fas fa-wind"></i> W <span id="currentWind">5<i class="fas fa-long-arrow-alt-down sm"></i></span> </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6 Fjalla text-view-2"><i class="fas fa-thermometer-empty"></i> L <span id="currentLow">10</span>&#176;</div>
                                        <div class="col-6 Fjalla text-view-2"><i class="fas fa-tint"></i> P <span id="currentPrecep">0</span>%</div>
                                    </div>
                                </div>
                                <div class="row col-8 text-center">
                                    <div class="col-12 text-center  text-view-3" id="currentForecast">Partially cloudy</div>
                                </div>
                            </div>
                            <div class="row d-none">
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/IJ6QWSYqqp8?controls=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                    </div>
                </div>
                <div class="" id="weatherWidget" style="padding-top: 1%;">
                    <div>
                        <nav>
                            <div class="nav nav-tabs text-center clearData text-view-3" id="nav-tab" role="tablist">
                            </div>
                        </nav>
                    </div>
                    <div class="tab-content clearData" id="nav-tabContent">
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade forecastTabContent" id="nav-test-2" role="tabpanel" aria-labelledby="nav-test-2-tab">
            <!--<div class="card col-12 bg-transparent text-white">-->
            <!--<p class="text-center">-->
            <!--<a class="text-arvig-green" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">-->
            <!--RADAR-->
            <!--</a>-->
            <!--</p>-->
            <!--<div class="collapse" id="collapseExample">-->
            <div class="bg-transparent" id="radarBody">
                <!--<iframe src="https://www.rainviewer.com/map.html?loc=46.6344,-95.0977,6&oFa=0&oC=1&oU=0&oCS=1&oF=0&oAP=1&rmt=2&c=3&o=89&lm=0&th=1" width="100%" frameborder="0" style="border:0;height:50vh;" allowfullscreen></iframe>-->
                <!--<iframe src="https://www.rainviewer.com/map.html?loc=46.6297,-95.0912,6&oFa=0&oC=1&oU=0&oCS=1&oF=0&oAP=0&rmt=2&c=3&o=89&lm=0&th=1" width="100%" frameborder="0" style="border:0;height:50vh;" allowfullscreen></iframe>-->
            </div>
            <!--</div>-->
            <!--</div>-->
        </div>
    </div>
    <!--<div class="text-arvig-green row m-0 fixed-bottom text-view-2" role="alert">-->
        <!--&lt;!&ndash;<button type="button" onclick="this.parentNode.parentNode.removeChild(this.parentNode);" class="close" data-dismiss="alert"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>&ndash;&gt;-->
        <!--<div class="col-1 pl-3 text-center pt-2 pb-2 text-white border border-danger bg-danger" style="border-radius: 10px 0px 0px 0px;">-->
            <!--<div class="align-middle">-->
                <!--<i class="fas fa-exclamation-triangle text-white"></i> Alert!-->
            <!--</div>-->
        <!--</div>-->
        <!--<div class="col-11 pl-0 bg-white text-danger" style="border-radius: 0px 10px 0px 0px;">-->
            <!--<marquee style="padding-bottom: 0px;padding-top: 10px;">-->
                <!--<span id="alertMessage">Lorem ipsum dolor Lorem ipsum dolor Lorem ipsum dolor Lorem ipsum dolor Lorem ipsum dolor Lorem ipsum dolor!</span>-->
            <!--</marquee>-->
        <!--</div>-->
    <!--</div>-->
</div>
</body>
<script>


    function getNextEvent(currentOrder){
        firebase
            .database()
            .ref()
            .child('/events/')
            .orderByChild('order')
            .startAt(currentOrder + 1)
            .limitToFirst(1)
            .once('value', function (snapshot) {
                console.log('TEST-TEST-TEST-TEST-TEST');
                console.log(snapshot.val());
                console.log('TEST-TEST-TEST-TEST-TEST');
            });
    }
    // currentEvent('-LTPGx4STxLc4pKN2V9V');
    // function currentEvent(eventId){
    //     var currentEvent = {};
    //     firebase
    //         .database()
    //         .ref()
    //         .child('/events/' + eventId)
    //         .once('value', function (snapshot) {
    //             console.log('TEST-TEST-TEST-TEST-TEST');
    //             console.log(snapshot.val());
    //             currentEvent = snapshot.val();
    //             // getNextEvent(snapshot.val().order);
    //             console.log('TEST-TEST-TEST-TEST-TEST');
    //         });
    //     return currentEvent;
    // }
    // var rootRef = firebase
    //     .database()
    //     .ref()
    //     .child('/events/')
    //
    // rootRef
    //     .orderByChild('order')
    //     .once('value', function (snapshot) {
    //
    //     });
    // var database = firebase.database().ref('/events/');
    // var starCountRef = database.ref('events');
    //     console.log(database);
    // firebase.database().ref('events').orderByChild('id').on('value', function(snapshot) {
    //     console.log('HERER');
    //     // console.log(snapshot.val());
    //     snapshot.forEach(function(child) {
    //         console.log(child.val()) // NOW THE CHILDREN PRINT IN ORDER
    //     });
    //     // updateStarCount(postElement, snapshot.val());
    // });
    var params = getUrlParameter();
    function getUrlParameter(callback) {
        // var urlParams = {};
        var urlParams = {};
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i,
            zipCode = '56573';
        // console.log(sPageURL);
        // console.log(sURLVariables)
        // console.log(sURLVariables.length)
        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');
            urlParams[sParameterName[0]] = sParameterName[1];
            // console.log('*****************************');
            // console.log(sParameterName);
            if (sParameterName[0] === 'id') {
                if (sParameterName[1] === undefined ? false : decodeURIComponent(sParameterName[1])) {
                    // console.log(sParameterName[1]);
                    urlParams[sParameterName[0]] = sParameterName[1];
                    // eventParams = sParameterName;
                    // eventParams = currentEvent(sParameterName[1]);
                    // console.log(eventParams);
                    // zipCode = sParameterName[1];
                }
                // console.log(sParameterName[1]);
            } else if (sParameterName[0] === 'zip') {
                if (sParameterName[1] === undefined ? false : decodeURIComponent(sParameterName[1])) {
                    urlParams = {"zip": sParameterName[1], "loops": "1", "loopLength": "60"};
                    // zipCode = sParameterName[1];
                }
                // console.log(sParameterName[1]);
            }
        }
        // if(eventParams){
        //     // return callback(eventParams.id);
        //     // return currentEvent(eventParams.id);
        //     return eventParams;
        // } else {
        return urlParams;
        // }

        // getGeo(zipCode);
    };
    // console.log(currentEvent(params.id));
    // console.log(params);
    // console.log(params.interval);
    let eventData = new EventData(params);
    // eventData.eventData();
    // eventData.getNextEvent();
    // console.log(eventData);
    // todayAnimation(params.interval * 1000);
    // var loopTabs = setInterval(moveItem, 4000);
    // var interval = 40000;
       // var timer =  $('#timer').append('<span style="position: fixed"></span>');
       var count = 1;
    // setInterval(function(){
    //     var mls = count * 1000;
    //     var interval = params.interval * 1000;
    //     if(mls >= (interval * 1)){
    //         $('#slideNumber').text('END');
    //     } else if(mls >= (interval * .75)){
    //         $('#slideNumber').text('8');
    //
    //     } else if(mls >= (interval * .675)){
    //         $('#slideNumber').text('7');
    //
    //     } else if(mls >= (interval * .60)){
    //         $('#slideNumber').text('6');
    //
    //     } else if(mls >= (interval * .525)){
    //         $('#slideNumber').text('5');
    //
    //     } else if(mls >= (interval * .45)){
    //         $('#slideNumber').text('4');
    //
    //     } else if(mls >= (interval * .375)) {
    //         $('#slideNumber').text('3');
    //
    //     }else if(mls >= (interval * .30)){
    //         $('#slideNumber').text('2');
    //
    //     }
    //         $('#timer').text(count);
    //     count++;
    //
    // }, 1000);
</script>
</html>